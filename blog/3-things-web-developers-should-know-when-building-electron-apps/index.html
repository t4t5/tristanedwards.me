<!doctype html> <html lang=en> <head> <meta charset=utf-8> <meta content="width=device-width,initial-scale=1" name=viewport> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-163841590-3"></script> <script> window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-163841590-3'); </script> <base href=/ > <link href=/global.css rel=stylesheet> <link href=client/main.2094326193.css rel=stylesheet><link href=client/client.91dc9fa8.css rel=stylesheet><link href=client/Nav.d5545e19.css rel=stylesheet><link href=client/BlogLayout.b5aa4612.css rel=stylesheet> <noscript id=sapper-head-start></noscript><title>3 Things Web Developers Should Know When Building Electron Apps | Blog | Tristan Edwards</title><link href=/dracula.css rel=stylesheet><link href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,400;0,700;1,400&display=swap" rel=stylesheet> <meta content="3 Things Web Developers Should Know When Building Electron Apps" name=title> <meta content="Before I started working on Codespace, I had never really built anything in Electron. The only thing I knew was that apps like Slack and Notion were using it to create cross-platform desktop apps, and that everyone on Hacker News hated it because it consumes a lot of RAM. ü§∑‚Äç‚ôÄÔ∏è" name=description> <meta content=website property=og:type> <meta content="3 Things Web Developers Should Know When Building Electron Apps" property=og:title> <meta content="Before I started working on Codespace, I had never really built anything in Electron. The only thing I knew was that apps like Slack and Notion were using it to create cross-platform desktop apps, and that everyone on Hacker News hated it because it consumes a lot of RAM. ü§∑‚Äç‚ôÄÔ∏è" property=og:description> <meta content=https://tristanedwards.me/images/blog/electron/cover.jpg property=og:image> <meta content=summary_large_image property=twitter:card> <meta content="3 Things Web Developers Should Know When Building Electron Apps" property=twitter:title> <meta content="Before I started working on Codespace, I had never really built anything in Electron. The only thing I knew was that apps like Slack and Notion were using it to create cross-platform desktop apps, and that everyone on Hacker News hated it because it consumes a lot of RAM. ü§∑‚Äç‚ôÄÔ∏è" property=twitter:description> <meta content=https://tristanedwards.me/images/blog/electron/cover.jpg property=twitter:image><noscript id=sapper-head-end></noscript> </head> <body> <div id=sapper> <nav class=svelte-inunf6 data-dark><a href=/ class=svelte-inunf6 data-active=false>Home</a> <a href=/blog class=svelte-inunf6 data-active>Blog</a> </nav> <div class="svelte-rprbgk blog"><header class=svelte-rprbgk><img alt="Tristan Edwards" src=/images/tristan.jpg class="svelte-rprbgk avatar"> <address class=svelte-rprbgk><a href=/blog class=svelte-rprbgk rel=author>Tristan Edwards</a></address> <span class="svelte-rprbgk divider">/</span> <time datetime=2020-05-20T00:00:00.000Z pubdate>May 20, 2020</time></header> <h1 class=svelte-rprbgk>3 Things Web Developers Should Know When Building Electron Apps</h1> <img alt="Cover picture" src=/images/blog/electron/cover.jpg class="svelte-rprbgk wide"> <div class="svelte-rprbgk content"><p>Before I started working on <a href=https://codespace.app>Codespace</a>, I had never really built anything in Electron. The only thing I knew was that apps like Slack and Notion were using it to create cross-platform desktop apps, and that everyone on Hacker News hated it because it consumes a lot of RAM. ü§∑‚Äç‚ôÄÔ∏è</p> <p>Even though I‚Äôve built apps on the web for 10 years, it was quite a journey discovering all the quirks of Electron. Here are 3 small things I learned that can hopefully help out someone who‚Äôs just getting started:</p> <h2>1. Quitting logic is not trivial</h2> <p>Quitting an app is easy right? Surely there‚Äôs just some built-in behaviour that handles all of that for us? Wrong. Although you might not think about it as a user, when you start developing native apps, you realise that there‚Äôs often no ‚Äúone-size-fits-all‚Äù for how and when apps should quit ‚Äì it all depends on their use case.</p> <p>For starters, the <em>default behaviour</em> is different based on what OS you‚Äôre using. On Windows and Linux, users have been taught that ‚Äúclosing the window also quits the app‚Äù. On macOS however, that is not the case: clicking the red traffic light button merely closes the window, but the app itself usually stays in the dock and keeps running in the background until you actively choose to quit it.</p> <p>The difference is also not just based on the user‚Äôs OS, it also varies across apps themselves. Most apps are happy with the default OS behaviour, but some applications like 1Password will quit as soon as you close the window for security reasons. More commonly, there are cases where you want to make it <em>appear</em> as if the app has been quit, but in reality you‚Äôre simply <em>hiding the dock icon</em> while the app keeps running in the background. This is typically the case for apps that appear in your menu bar as soon as you turn on your computer.</p> <p><img alt="Quitting in Chrome" src=/images/blog/electron/chrome-quit.png> <em>Some apps like Google Chrome go even further and ask you to hold down cmd + Q to quit.</em></p> <p>So to sum it up ‚Äì think about how and when your app should quit. To help you out, here are some snippets of logic that you can use in your own app:</p> <pre><code class=language-javascript><span class=hljs-comment>// Hide window instead of quitting when closing it:</span>

win = <span class=hljs-keyword>new</span> BrowserWindow({ <span class=hljs-attr>width</span>: <span class=hljs-number>500</span>, <span class=hljs-attr>height</span>: <span class=hljs-number>500</span> })

win.on(<span class=hljs-string>'close'</span>, e => {
  e.preventDefault() <span class=hljs-comment>// Prevents quit</span>
  win.hide()
})
</code></pre> <pre><code class=language-javascript><span class=hljs-comment>// Quit app on macOS ONLY if using command + Q or some other force quit option:</span>

win = <span class=hljs-keyword>new</span> BrowserWindow({ <span class=hljs-attr>width</span>: <span class=hljs-number>500</span>, <span class=hljs-attr>height</span>: <span class=hljs-number>500</span> })

<span class=hljs-keyword>let</span> forceQuit = <span class=hljs-literal>false</span>

<span class=hljs-comment>// Triggered before close event, i.e. when pressing command + Q</span>
app.on(<span class=hljs-string>'before-quit'</span>, () => {
  forceQuit = <span class=hljs-literal>true</span>
})

win.on(<span class=hljs-string>'close'</span>, e => {
  <span class=hljs-keyword>if</span> (!forceQuit && process.platform === <span class=hljs-string>'darwin'</span>) { <span class=hljs-comment>// "darwin" is macOS</span>
    e.preventDefault() <span class=hljs-comment>// Prevents quit</span>
    win.hide()
  }

  <span class=hljs-comment>// Let the app quit normally...</span>
})
</code></pre> <h2>2. Write <em>thrice</em>, run everywhere</h2> <p>One of the expectations developers might initially have when building apps with Electron is that you can happily hack around on your Mac, make sure it runs there, and then ship the code assuming that it will work just as well on Windows and Linux.</p> <p>Woah, not so fast, cowboy! Again, there are some core differences in how the OS works, and you definitely need to test your app extensively on all three platforms if you‚Äôre going to market it as a cross-platform app. We‚Äôve already talked about quitting logic, but here are some other examples of often overlooked quirks that you need to think about:</p> <ul><li>Short commands are different. Mac users are used to ‚Äú‚åò + <em>key</em>‚Äù to trigger an action within an app, whereas Linux and Windows users use ‚ÄúCTRL + <em>key</em>‚Äù.</li> <li>Scrollbar visibility. If you‚Äôre a web designer, you probably already know the pain of shipping a website that looks great on your Mac, only to find that, when you open it on Windows, there are these horrible-looking scrollbars everywhere. Electron apps are no different, so you will probably want to <a href=https://css-tricks.com/the-current-state-of-styling-scrollbars/ >style your scrollbars</a>.</li> <li>Differences in layouts and menus. Most well-designed apps will use so-called ‚Äúframeless‚Äù styling, to avoid having an ugly grey bar on top of their app‚Äôs window. This is trivial to achieve in Electron, using <code>BrowserWindow({ frame: false })</code>, however, you‚Äôll most likely want to tweak your layout slightly for each platform after setting it. Below is an example of how I had to add some top padding ‚Äì but <em>only</em> to the macOS version of Codespace ‚Äì in order to take into account the area occupied by the traffic lights:</ul> <p><img alt="Top padding on macOS" src=/images/blog/electron/top-padding.png></p> <p>This is of course not everything, there are also differences when it comes to installation, auto-updates, emoji support‚Ä¶ etc. In short, you <em>need</em> to test your app on all three platforms. I personally found that paying for something like <a href=https://www.parallels.com/products/desktop/ >Parallels Desktop</a> was probably the best investment I ever made while building my app. There are also free alternatives like <a href=https://www.virtualbox.org/ >VirtualBox</a>, but from what I understand, there‚Äôs a considerable difference in performance, which could affect your developer happiness.</p> <h2>3. You don‚Äôt need the App Store</h2> <p>As web developers, we‚Äôre used to deploying our sites to a server and have them live instantly, but as we know, native apps work a bit differently. One of the dilemmas I faced when Codespace was getting close to launching was whether to use the Mac App Store or not. After all, it‚Äôs an extra distribution channel that might bring in some more customers, but I was also nervous about unwarranted app rejections and the <a href=https://9to5mac.com/2019/11/04/electron-app-rejections/ >various stories of Electron apps being booted from the store</a>. On top of that, 30% is a pretty hefty fee for what Apple is providing if you ask me.</p> <p>In the end, I decided to distribute the app myself, and I haven‚Äôt regretted it one bit. Sure, it‚Äôs a little bit of extra work setting up your own payment and licensing system, but if you‚Äôre going cross-platform, you will have to do that anyway. It also pushed me to take 100% control of the marketing of the app, and I discovered that spending some extra time creating a nice-looking landing page is more likely to yield great results than just uploading some screenshots to the store.</p> <p>In short, if your app is cross-platform, I don‚Äôt see any great benefit to using the App Store as your main distribution channel. Skipping it also frees you from going through a potentially long review process every time you push an update to your app. You will however still need to pay for an Apple Developer Account in order to sign and notarise your app, otherwise it won‚Äôt run on anyone else‚Äôs Mac (more on this in a later blog post).</p> <hr> <p>I hope you enjoyed reading and learned something new! I will most likely keep posting tutorials on how to build things with Electron, so make sure you <a href=https://twitter.com/t4t5>follow me on Twitter</a> so that you don‚Äôt miss anything!</p> </div> <div class="svelte-rprbgk follow-box"><img alt="Tristan Edwards" src=/images/tristan.jpg class="svelte-rprbgk avatar"> <i>Don‚Äôt want to miss any future tutorials or updates on the things I‚Äôm building? <a href=https://twitter.com/t4t5 class=svelte-rprbgk target=_blank>Follow me on Twitter! </a></i></div> </div></div> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,null,{}]};if('serviceWorker' in navigator)navigator.serviceWorker.register('/service-worker.js');(function(){try{eval("async function x(){}");var main="/client/client.91dc9fa8.js"}catch(e){main="/client/legacy/client.bc0bae36.js"};var s=document.createElement("script");try{new Function("if(0)import('')")();s.src=main;s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@1.0.1.js";s.setAttribute("data-main",main);}document.head.appendChild(s);}());</script> 